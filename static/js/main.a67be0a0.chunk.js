(this["webpackJsonp10-weather-app"]=this["webpackJsonp10-weather-app"]||[]).push([[0],{29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(23),c=a(0),s=a.n(c),i=a(11),r=a.n(i),o=(a(29),a(30),a(18)),d=a(4),l=(a(31),a.p+"static/media/logo.2437340f.svg"),u=a(1),j=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("header",{className:"Header",children:Object(u.jsx)("img",{className:"Header__logo",src:l})})})},p=a(9),b=a(10),h=a.n(b),m=a(12),f="GET_COORDS",g="LOAD_WEATHER",O="CLEAR_WEATHER",x="RESIZE_WINDOW",v=function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){var n,c,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:return n=t.sent,t.next=6,n.json();case 6:if(c=t.sent,console.log(c),s={isLoaded:!0,data:c},!n.ok){t.next=13;break}a({type:g,payload:s}),t.next=14;break;case 13:throw Error(c.message);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}()},_=function(e,t){return"forecast"===t?"https://api.openweathermap.org/data/2.5/onecall?"+"lat=".concat(e[0],"&")+"lon=".concat(e[1],"&")+"exclude=current,minutely,alerts&appid=54dc99a23c48019854e34a7c7c2d5978":"find"===t?"https://api.openweathermap.org/data/2.5/find?"+"q=".concat(e[0],"&")+"units=metric&appid=54dc99a23c48019854e34a7c7c2d5978":"https://api.openweathermap.org/data/2.5/weather?"+"".concat("id"===t?"id=".concat(e,"&"):"")+"".concat("curLoc"===t?"lat=".concat(e[0],"&"):"")+"".concat("curLoc"===t?"lon=".concat(e[1],"&"):"")+"".concat("refresh"===t?"lat=".concat(e[0],"&"):"")+"".concat("refresh"===t?"lon=".concat(e[1],"&"):"")+"".concat("name"===t?"q=".concat(e[0],"&"):"")+"appid=54dc99a23c48019854e34a7c7c2d5978"},y=function(e){var t=Math.round(e-273);return"".concat(t>0?"+":"").concat(t,"\xb0")},w=(a(37),a(38),function(){return Object(u.jsxs)("div",{className:"lds-ellipsis",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})}),N=(a(39),a.p+"static/media/sun_line.1e441ed7.svg"),M=a.p+"static/media/sun.250b1b63.svg",S=function(e){var t=new Date(e),a=t.getUTCHours(),n=t.getUTCMinutes();return(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)},P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],C=function(e){var t=new Date(e),a=S(e),n=t.getUTCMonth(),c=t.getUTCDate(),s=t.getUTCFullYear();return a+", "+P[n]+" "+c+", "+s},F=function(e){var t=e.data,a=t.dt>t.sys.sunrise&&t.dt<t.sys.sunset,n=Math.round((1e3*t.sys.sunset-1e3*t.sys.sunrise)/6e4),c=Math.floor(n/60),s=n-60*c,i=(t.dt-t.sys.sunrise)/(t.sys.sunset-t.sys.sunrise)*Math.PI,r=50*Math.cos(i)*-1+50,o=100*Math.sin(i);return Object(u.jsxs)("div",{className:"SunCard",children:[Object(u.jsx)("p",{className:"SunCard__current-date",children:C(1e3*t.dt+1e3*t.timezone)}),Object(u.jsx)("p",{className:"SunCard__title",children:"Day length"}),Object(u.jsx)("p",{className:"SunCard__day-length",children:"".concat(c,"h ").concat(s,"m")}),Object(u.jsxs)("div",{className:"SunCard__sun-path",children:[Object(u.jsx)("img",{className:"SunCard__sun-path-line",src:N,alt:"sun path"}),a&&Object(u.jsx)("img",{className:"SunCard__sun-path-sun",src:M,alt:"sun",style:{bottom:"calc(".concat(o,"% - 16px)"),left:"calc(".concat(r,"% - 16px)")}}),Object(u.jsx)("p",{className:"SunCard__sun-path-text",children:"".concat(S(1e3*t.sys.sunrise+1e3*t.timezone)," - ").concat(S(1e3*t.sys.sunset+1e3*t.timezone))})]})]})},k=(a.p,a.p,a(40),a.p+"static/media/01d.6350bf80.svg"),E=a.p+"static/media/01n.e192cbe7.svg",L=a.p+"static/media/02d.38040ba4.svg",A=a.p+"static/media/02n.0d52d785.svg",D=a.p+"static/media/03d.e2007b0b.svg",T=a.p+"static/media/04d.4ea57967.svg",H=a.p+"static/media/09d.aafae987.svg",U=a.p+"static/media/10d.611ef4da.svg",W=a.p+"static/media/10n.4837e22b.svg",R=a.p+"static/media/11d.2c0c4d7b.svg",z=a.p+"static/media/13d.02e16539.svg",I=a.p+"static/media/50d.60cb5878.svg",J={"01d":k,"01n":E,"02d":L,"02n":A,"03d":D,"03n":D,"04d":T,"04n":T,"09d":H,"09n":H,"10d":U,"10n":W,"11d":R,"11n":R,"13d":z,"13n":z,"50d":I,"50n":I},B=a(13),q=function(e){var t=Object(d.h)().url,a=Object(p.b)(),n=Object(p.c)((function(e){return e.weather.data})),s=Object(p.c)((function(e){return e.weather.isLoaded}));Object(B.d)();return Object(c.useEffect)((function(){if("/"===t)return console.log("getCoords"),void a((function(e){navigator.geolocation.getCurrentPosition((function(t){var a={isLoaded:!0,lat:t.coords.latitude.toFixed(6),lon:t.coords.longitude.toFixed(6)};e({type:f,payload:a})}))}));if("coords"!==t.slice(1,7))if("id"!==t.slice(1,3));else{var e=t.slice(4);s||a(v(_(e,"id")))}else{var n=t.slice(8).split("&").map((function(e){return e.slice(4,13)}));s||a(v(_(n,"curLoc")))}})),Object(u.jsx)("div",{className:"MainPage",children:n?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"MainPage__location",children:[n.sys.country&&Object(u.jsx)("img",{className:"MainPage__location-flag",src:"https://www.countryflags.io/".concat(n.sys.country,"/flat/32.png")}),Object(u.jsx)("p",{children:n.name?n.name:"Unknown location"})]}),Object(u.jsxs)("div",{className:"MainPage__temp",children:[Object(u.jsx)("p",{className:"MainPage__temp",children:y(n.main.temp)}),Object(u.jsx)("img",{src:J[n.weather[0].icon]})]}),Object(u.jsx)("p",{className:"MainPage__description",children:"Feels like ".concat(y(n.main.feels_like))}),Object(u.jsxs)("div",{className:"MainPage__info",children:[Object(u.jsxs)("div",{className:"MainPage__info-item",children:[Object(u.jsx)("p",{className:"MainPage__info-title",children:"Humidity"}),Object(u.jsx)("p",{className:"MainPage__info-data",children:"".concat(n.main.humidity,"%")})]}),Object(u.jsxs)("div",{className:"MainPage__info-item",children:[Object(u.jsx)("p",{className:"MainPage__info-title",children:"Wind"}),Object(u.jsx)("p",{className:"MainPage__info-data",children:n.wind.speed.toFixed(1)}),Object(u.jsx)("p",{className:"MainPage__info-unit",children:"m/s"})]}),Object(u.jsxs)("div",{className:"MainPage__info-item",children:[Object(u.jsx)("p",{className:"MainPage__info-title",children:"Pressure"}),Object(u.jsx)("p",{className:"MainPage__info-data",children:(n.main.pressure/1.33322387415).toFixed(0)}),Object(u.jsx)("p",{className:"MainPage__info-unit",children:"mmHg"})]}),Object(u.jsxs)("div",{className:"MainPage__info-item",children:[Object(u.jsx)("p",{className:"MainPage__info-title",children:"Visibility"}),Object(u.jsx)("p",{className:"MainPage__info-data",children:n.visibility>999?(n.visibility/1e3).toFixed(0):n.visibility}),Object(u.jsx)("p",{className:"MainPage__info-unit",children:n.visibility>999?"km":"meters"})]})]}),Object(u.jsx)(F,{data:n})]}):Object(u.jsx)(w,{})})},G=a(16),K=(a(43),function(){return function(){var e=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:g,payload:{isLoaded:!1,data:null}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),V=function(){var e=Object(d.g)(),t=Object(c.useState)(""),a=Object(G.a)(t,2),n=a[0],s=a[1],i=Object(c.useState)([]),r=Object(G.a)(i,2),o=r[0],l=r[1],j=Object(c.useState)(!1),b=Object(G.a)(j,2),f=b[0],g=b[1],O=Object(c.useState)(0),x=Object(G.a)(O,2),v=x[0],y=x[1],w=Object(p.b)(),N=function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(t.target.value),!(t.target.value.length>=3)){e.next=15;break}return e.next=4,_([t.target.value],"find");case 4:return a=e.sent,e.next=7,fetch(a);case 7:return n=e.sent,e.next=10,n.json();case 10:c=e.sent,y(0),n.ok&&l(c.list),e.next=16;break;case 15:l([]);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var t=Object(m.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),o.length>0&&(e.push("/id&".concat(o[v].id)),w(K()),l([]),s(""));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(e){y(Number(e.target.id))},P=function(t){e.push("/id&".concat(o[t.target.id].id)),w(K()),l([]),s("")};return Object(u.jsxs)("form",{onSubmit:M,action:"search",className:"SearchForm",children:[Object(u.jsxs)("div",{className:"SearchForm__input",children:[Object(u.jsx)("input",{action:"Search",placeholder:"Search...",icon:"search",onChange:N,onKeyUp:function(e){"ArrowDown"===e.code&&(e.preventDefault(),y(v===o.length-1?0:v+1)),"ArrowUp"===e.code&&(e.preventDefault(),y(0===v?o.length-1:v-1))},onFocus:function(){g(!0)},onBlur:function(e){e.relatedTarget&&e.relatedTarget.classList.contains("SearchForm__hints-button_selected")?e.target.focus():g(!1)},value:n}),f&&o.length>0?Object(u.jsx)("div",{className:"SearchForm__hints",children:0===o.length?null:o.map((function(e,t){return Object(u.jsxs)("button",{type:"button",id:t,onClick:P,onMouseOver:S,className:"".concat(t===v?"SearchForm__hints-button_selected":"SearchForm__hints-button"),children:[Object(u.jsx)("img",{src:"https://www.countryflags.io/".concat(e.sys.country,"/flat/16.png"),alt:"country flag"}),"".concat(e.name,", ").concat(e.sys.country," ").concat(Math.round(e.main.temp),"\xb0C")]},e.id)}))}):null]}),Object(u.jsx)("button",{type:"submit",className:"SearchForm__button ".concat(n.length<2?"SearchForm__button_disabled":""),children:"Search"})]})},Y=function(){var e=Object(p.c)((function(e){return e.coords})),t=Object(p.b)(),a=function(e){var a;t((a=e.target.innerWidth,function(e){e({type:x,payload:{width:a}})}))};return Object(c.useEffect)((function(){return window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}})),Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(o.a,{children:[Object(u.jsx)(j,{}),Object(u.jsx)(V,{}),Object(u.jsxs)(d.d,{children:[Object(u.jsx)(d.b,{exact:!0,path:"/",children:e.isLoaded?Object(u.jsx)(d.a,{to:"/coords&lat=".concat(e.lat,"&lon=").concat(e.lon)}):Object(u.jsx)(q,{})}),Object(u.jsx)(d.b,{exact:!0,path:"/coords&:coords",children:Object(u.jsx)(q,{})}),Object(u.jsx)(d.b,{exact:!0,path:"/id&:id",children:Object(u.jsx)(q,{})})]})]})})},Z=a(15),Q=a(24),X={isLoaded:!1,lat:null,long:null},$={data:null,isLoaded:!1},ee={width:window.innerWidth},te=Object(Z.b)({coords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.payload;default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:case O:return t.payload;default:return e}},window:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.payload;default:return e}}}),ae=(a(44),a.p,a.p+"static/media/smile.3359c8af.svg"),ne=a.p+"static/media/sad.3b060b40.svg",ce=a.p+"static/media/surprise.1036160b.svg",se=function(e){e.style;var t=e.options,a=e.message;e.close;return Object(u.jsxs)("div",{className:"Alert",children:["info"===t.type&&Object(u.jsx)("img",{className:"Alert__icon",src:ce}),"success"===t.type&&Object(u.jsx)("img",{className:"Alert__icon",src:ae}),"error"===t.type&&Object(u.jsx)("img",{className:"Alert__icon",src:ne}),Object(u.jsx)("p",{children:a})]})},ie=Object(Z.c)(te,Object(Z.a)(Q.a)),re={position:B.b.BOTTOM_RIGHT,timeout:2e3,offset:"20px",transition:B.c.FADE};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(p.a,{store:ie,children:Object(u.jsx)(B.a,Object(n.a)(Object(n.a)({template:se},re),{},{children:Object(u.jsx)(Y,{})}))})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.a67be0a0.chunk.js.map